language: generic
sudo: required

services:
  - docker

env:
  - IMAGE=core-api
  - IMAGE=core-stretch
  - IMAGE=buildenv-stretch
  - IMAGE=w2d

before_script:
  - docker login -u ${DOCKER_USERNAME} -p ${DOCKER_PASSWORD}

script:
  - make ${IMAGE}
  - make publish-${IMAGE}

notifications:
  webhooks:
    urls:
      - https://w2d.blizzlike.org/v1/travis
    on_start: always
